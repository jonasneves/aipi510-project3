/opt/hostedtoolcache/Python/3.11.14/x64/lib/python3.11/site-packages/mlflow/tracking/_tracking_service/utils.py:140: FutureWarning: Filesystem tracking backend (e.g., './mlruns') is deprecated. Please switch to a database backend (e.g., 'sqlite:///mlflow.db'). For feedback, see: https://github.com/mlflow/mlflow/issues/18534
  return FileStore(store_uri, store_uri)
2025/11/29 02:45:43 INFO mlflow.tracking.fluent: Experiment with name 'salary_prediction' does not exist. Creating a new experiment.
2025-11-29 02:45:43,038 - DataMerger - INFO - Data merger initialized. Log file: logs/data_merge_20251129_024543.log
2025-11-29 02:45:43,038 - DataMerger - INFO - Applying training profile: linkedin_only
2025-11-29 02:45:43,039 - DataMerger - INFO -   Description: Train only on LinkedIn data with rich features
2025-11-29 02:45:43,039 - DataMerger - INFO -   h1b: disabled
2025-11-29 02:45:43,039 - DataMerger - INFO -   adzuna: disabled
2025-11-29 02:45:43,039 - DataMerger - INFO -   linkedin: enabled
--- Model Training ---

MLFlow tracking URI: file:./mlruns
MLFlow experiment: salary_prediction

Loading data...

Using training profile: linkedin_only
Loaded 3876 records from merged data
  Filtering data for profile: linkedin_only
  After profile filter: 3876 records

Filtering to recent data (last 2 years: 2024-2025)
  Kept 3876 / 3876 records (100.0%)
  Renaming location_state to worksite_state for feature engineering

Engineering features...

Prepared 3562 samples with 30 features
Target column: annual_salary

Creating train/test split...
  Train: 2492 samples (70.0%)
  Val:   535 samples (15.0%)
  Test:  535 samples (15.0%)

Training XGBoost model...
MLFlow run ID: e41a516567404156895f534a597ebdb0
Training XGBoost salary prediction model...
Training samples: 2492
Features: 29
Validation samples: 535
[0]	validation_0-rmse:116052.85890	validation_1-rmse:121023.63728
[1]	validation_0-rmse:114499.24939	validation_1-rmse:119921.78445
[2]	validation_0-rmse:112796.04972	validation_1-rmse:118720.34631
[3]	validation_0-rmse:111385.68029	validation_1-rmse:117669.06445
[4]	validation_0-rmse:110385.69869	validation_1-rmse:117090.92083
[5]	validation_0-rmse:109329.15941	validation_1-rmse:116439.42015
[6]	validation_0-rmse:108276.64845	validation_1-rmse:115907.74265
[7]	validation_0-rmse:107443.73574	validation_1-rmse:115274.02105
[8]	validation_0-rmse:106611.22456	validation_1-rmse:114723.84139
[9]	validation_0-rmse:105888.14693	validation_1-rmse:114361.43558
[10]	validation_0-rmse:105392.68350	validation_1-rmse:114084.61406
[11]	validation_0-rmse:104786.17743	validation_1-rmse:113745.33765
[12]	validation_0-rmse:104147.94324	validation_1-rmse:113454.38772
[13]	validation_0-rmse:103749.00002	validation_1-rmse:113296.45481
[14]	validation_0-rmse:103259.18302	validation_1-rmse:113049.21499
[15]	validation_0-rmse:102834.61856	validation_1-rmse:112921.20906
[16]	validation_0-rmse:102334.04982	validation_1-rmse:112695.42734
[17]	validation_0-rmse:102000.93552	validation_1-rmse:112531.98530
[18]	validation_0-rmse:101661.81549	validation_1-rmse:112422.13454
[19]	validation_0-rmse:101278.81441	validation_1-rmse:112227.14924
[20]	validation_0-rmse:100949.96023	validation_1-rmse:111986.58040
[21]	validation_0-rmse:100617.61875	validation_1-rmse:112028.69772
[22]	validation_0-rmse:100215.44196	validation_1-rmse:111999.49319
[23]	validation_0-rmse:99857.23234	validation_1-rmse:111968.96524
[24]	validation_0-rmse:99524.23353	validation_1-rmse:111841.46637
[25]	validation_0-rmse:99219.84433	validation_1-rmse:111793.38716
[26]	validation_0-rmse:98992.73908	validation_1-rmse:111714.83054
[27]	validation_0-rmse:98786.94203	validation_1-rmse:111673.22256
[28]	validation_0-rmse:98686.59769	validation_1-rmse:111658.30583
[29]	validation_0-rmse:98469.45729	validation_1-rmse:111750.72020
[30]	validation_0-rmse:98092.91776	validation_1-rmse:111813.58023
[31]	validation_0-rmse:97908.94625	validation_1-rmse:111762.27273
[32]	validation_0-rmse:97696.02919	validation_1-rmse:111741.86984
[33]	validation_0-rmse:97320.45390	validation_1-rmse:111811.70289
[34]	validation_0-rmse:97150.11668	validation_1-rmse:111775.15698
[35]	validation_0-rmse:96870.33188	validation_1-rmse:111851.88738
[36]	validation_0-rmse:96761.08011	validation_1-rmse:111841.42042
[37]	validation_0-rmse:96488.13447	validation_1-rmse:111922.15276
[38]	validation_0-rmse:96309.16311	validation_1-rmse:111889.76651
[39]	validation_0-rmse:96042.85811	validation_1-rmse:111768.96831
[40]	validation_0-rmse:95934.56645	validation_1-rmse:111746.76279
[41]	validation_0-rmse:95660.43987	validation_1-rmse:111793.99069
[42]	validation_0-rmse:95327.16407	validation_1-rmse:111856.14875
[43]	validation_0-rmse:95216.20878	validation_1-rmse:111976.11399
[44]	validation_0-rmse:95082.79309	validation_1-rmse:111945.70299
[45]	validation_0-rmse:94925.48587	validation_1-rmse:112020.81168
[46]	validation_0-rmse:94736.72955	validation_1-rmse:112080.67367
[47]	validation_0-rmse:94622.38885	validation_1-rmse:112164.50322
[48]	validation_0-rmse:94486.62130	validation_1-rmse:112127.24079
[49]	validation_0-rmse:94273.38970	validation_1-rmse:112112.66393
[50]	validation_0-rmse:94084.27664	validation_1-rmse:112190.75653
[51]	validation_0-rmse:93986.54885	validation_1-rmse:112147.03182
[52]	validation_0-rmse:93778.22539	validation_1-rmse:112163.78779
[53]	validation_0-rmse:93590.64608	validation_1-rmse:112130.63806
[54]	validation_0-rmse:93458.97349	validation_1-rmse:112112.59454
[55]	validation_0-rmse:93404.18034	validation_1-rmse:112110.64503
[56]	validation_0-rmse:93260.33540	validation_1-rmse:112194.27345
[57]	validation_0-rmse:93197.48590	validation_1-rmse:112215.24762
[58]	validation_0-rmse:93062.91407	validation_1-rmse:112223.72709
[59]	validation_0-rmse:92962.93211	validation_1-rmse:112258.12189
[60]	validation_0-rmse:92862.38584	validation_1-rmse:112319.36921
[61]	validation_0-rmse:92713.68187	validation_1-rmse:112259.19797
[62]	validation_0-rmse:92419.54449	validation_1-rmse:112286.98946
[63]	validation_0-rmse:92266.86961	validation_1-rmse:112318.28497
[64]	validation_0-rmse:92115.34865	validation_1-rmse:112416.05932
[65]	validation_0-rmse:91982.19233	validation_1-rmse:112386.88577
[66]	validation_0-rmse:91851.84540	validation_1-rmse:112445.68162
[67]	validation_0-rmse:91694.77081	validation_1-rmse:112443.78456
[68]	validation_0-rmse:91536.08803	validation_1-rmse:112504.68573
[69]	validation_0-rmse:91465.86952	validation_1-rmse:112489.81269
[70]	validation_0-rmse:91318.15955	validation_1-rmse:112511.73985
[71]	validation_0-rmse:91193.89607	validation_1-rmse:112469.91809
[72]	validation_0-rmse:91011.14494	validation_1-rmse:112460.23197
[73]	validation_0-rmse:90839.50025	validation_1-rmse:112313.68755
[74]	validation_0-rmse:90693.58201	validation_1-rmse:112139.57140
[75]	validation_0-rmse:90531.62183	validation_1-rmse:112170.91921
[76]	validation_0-rmse:90439.11192	validation_1-rmse:112205.64327
[77]	validation_0-rmse:90326.01546	validation_1-rmse:112269.21062
[78]	validation_0-rmse:90181.13120	validation_1-rmse:112229.55761
[79]	validation_0-rmse:90096.29606	validation_1-rmse:112208.47838
[80]	validation_0-rmse:89991.35294	validation_1-rmse:112177.32828
[81]	validation_0-rmse:89895.85145	validation_1-rmse:112245.24350
[82]	validation_0-rmse:89807.59761	validation_1-rmse:112271.49286
[83]	validation_0-rmse:89712.99176	validation_1-rmse:112348.70156
[84]	validation_0-rmse:89581.30844	validation_1-rmse:112375.47544
[85]	validation_0-rmse:89474.99021	validation_1-rmse:112533.02402
[86]	validation_0-rmse:89371.81125	validation_1-rmse:112645.32310
[87]	validation_0-rmse:89292.60328	validation_1-rmse:112634.14562
[88]	validation_0-rmse:89250.92425	validation_1-rmse:112620.19081
[89]	validation_0-rmse:89061.49785	validation_1-rmse:112683.41017
[90]	validation_0-rmse:88937.62011	validation_1-rmse:112624.80392
[91]	validation_0-rmse:88846.50955	validation_1-rmse:112629.46934
[92]	validation_0-rmse:88707.32687	validation_1-rmse:112665.19480
[93]	validation_0-rmse:88549.19334	validation_1-rmse:112674.94548
[94]	validation_0-rmse:88409.44404	validation_1-rmse:112648.43711
[95]	validation_0-rmse:88213.85345	validation_1-rmse:112650.83935
[96]	validation_0-rmse:88116.06375	validation_1-rmse:112670.62353
[97]	validation_0-rmse:88049.65117	validation_1-rmse:112680.84807
[98]	validation_0-rmse:87942.40790	validation_1-rmse:112737.26288
[99]	validation_0-rmse:87890.53173	validation_1-rmse:112700.01359
[100]	validation_0-rmse:87840.18393	validation_1-rmse:112719.80759
[101]	validation_0-rmse:87736.28951	validation_1-rmse:112508.14190
[102]	validation_0-rmse:87582.05480	validation_1-rmse:112696.53859
[103]	validation_0-rmse:87483.41723	validation_1-rmse:112762.34915
[104]	validation_0-rmse:87410.57052	validation_1-rmse:112903.65583
[105]	validation_0-rmse:87341.30663	validation_1-rmse:112838.63314
[106]	validation_0-rmse:87238.55814	validation_1-rmse:112832.28715
[107]	validation_0-rmse:87140.30754	validation_1-rmse:112786.80735
[108]	validation_0-rmse:87065.50780	validation_1-rmse:112780.22390
[109]	validation_0-rmse:86947.86589	validation_1-rmse:112697.04520
[110]	validation_0-rmse:86791.47744	validation_1-rmse:112660.09932
[111]	validation_0-rmse:86692.99030	validation_1-rmse:112832.90793
[112]	validation_0-rmse:86611.81804	validation_1-rmse:112868.18042
[113]	validation_0-rmse:86557.73209	validation_1-rmse:112901.37023
[114]	validation_0-rmse:86467.34644	validation_1-rmse:112966.67975
[115]	validation_0-rmse:86415.21425	validation_1-rmse:112981.66724
[116]	validation_0-rmse:86315.74726	validation_1-rmse:113088.86983
[117]	validation_0-rmse:86241.03540	validation_1-rmse:113093.14944
[118]	validation_0-rmse:86137.89486	validation_1-rmse:113207.18487
[119]	validation_0-rmse:86083.77456	validation_1-rmse:113276.39337
[120]	validation_0-rmse:85988.87284	validation_1-rmse:113381.63291
[121]	validation_0-rmse:85950.55305	validation_1-rmse:113385.37305
[122]	validation_0-rmse:85850.02809	validation_1-rmse:113378.61264
[123]	validation_0-rmse:85803.65714	validation_1-rmse:113477.44993
[124]	validation_0-rmse:85711.35710	validation_1-rmse:113510.12537
[125]	validation_0-rmse:85634.30143	validation_1-rmse:113390.86759
[126]	validation_0-rmse:85593.36170	validation_1-rmse:113394.33127
[127]	validation_0-rmse:85523.62411	validation_1-rmse:113416.89578
[128]	validation_0-rmse:85475.60421	validation_1-rmse:113449.93264
[129]	validation_0-rmse:85366.32887	validation_1-rmse:113509.32420
[130]	validation_0-rmse:85272.78385	validation_1-rmse:113593.11138
[131]	validation_0-rmse:85145.45731	validation_1-rmse:113619.70030
[132]	validation_0-rmse:85038.36319	validation_1-rmse:113685.28080
[133]	validation_0-rmse:84986.68280	validation_1-rmse:113721.56184
[134]	validation_0-rmse:84929.44181	validation_1-rmse:113755.60069
[135]	validation_0-rmse:84814.44828	validation_1-rmse:113788.61576
[136]	validation_0-rmse:84744.45958	validation_1-rmse:113722.21236
[137]	validation_0-rmse:84676.67762	validation_1-rmse:113730.36654
[138]	validation_0-rmse:84587.36109	validation_1-rmse:113730.31940
[139]	validation_0-rmse:84533.17877	validation_1-rmse:113757.23394
[140]	validation_0-rmse:84468.75424	validation_1-rmse:113837.31565
[141]	validation_0-rmse:84431.39158	validation_1-rmse:113893.00089
[142]	validation_0-rmse:84352.06569	validation_1-rmse:114004.35131
[143]	validation_0-rmse:84289.08479	validation_1-rmse:114040.99676
[144]	validation_0-rmse:84224.92522	validation_1-rmse:114021.93029
[145]	validation_0-rmse:84185.40818	validation_1-rmse:113894.98804
[146]	validation_0-rmse:84086.89559	validation_1-rmse:113926.95823
[147]	validation_0-rmse:84041.92559	validation_1-rmse:113906.49401
[148]	validation_0-rmse:83997.82545	validation_1-rmse:114016.72846
[149]	validation_0-rmse:83937.85886	validation_1-rmse:114155.21028
[150]	validation_0-rmse:83844.59858	validation_1-rmse:114084.91849
[151]	validation_0-rmse:83767.22660	validation_1-rmse:114105.32558
[152]	validation_0-rmse:83678.83750	validation_1-rmse:114096.76366
[153]	validation_0-rmse:83595.34401	validation_1-rmse:114144.25772
[154]	validation_0-rmse:83535.80302	validation_1-rmse:114099.66087
[155]	validation_0-rmse:83455.48988	validation_1-rmse:114171.14050
[156]	validation_0-rmse:83404.13810	validation_1-rmse:114253.94226
[157]	validation_0-rmse:83378.58852	validation_1-rmse:114319.75854
[158]	validation_0-rmse:83301.69808	validation_1-rmse:114386.11695
[159]	validation_0-rmse:83246.13203	validation_1-rmse:114482.46426
[160]	validation_0-rmse:83200.83087	validation_1-rmse:114544.42127
[161]	validation_0-rmse:83150.96487	validation_1-rmse:114494.36789
[162]	validation_0-rmse:83089.62613	validation_1-rmse:114532.18461
[163]	validation_0-rmse:82998.77720	validation_1-rmse:114510.98311
[164]	validation_0-rmse:82925.94436	validation_1-rmse:114515.65683
[165]	validation_0-rmse:82869.26542	validation_1-rmse:114609.02246
[166]	validation_0-rmse:82788.76750	validation_1-rmse:114629.27981
[167]	validation_0-rmse:82748.42632	validation_1-rmse:114668.78996
[168]	validation_0-rmse:82651.71827	validation_1-rmse:114654.14538
[169]	validation_0-rmse:82600.43094	validation_1-rmse:114682.73367
[170]	validation_0-rmse:82525.15018	validation_1-rmse:114699.84403
[171]	validation_0-rmse:82478.60752	validation_1-rmse:114712.33026
[172]	validation_0-rmse:82413.99629	validation_1-rmse:114665.34798
[173]	validation_0-rmse:82352.95158	validation_1-rmse:114737.25466
[174]	validation_0-rmse:82306.16067	validation_1-rmse:114759.24036
[175]	validation_0-rmse:82225.57852	validation_1-rmse:114790.29505
[176]	validation_0-rmse:82162.65990	validation_1-rmse:114748.52493
[177]	validation_0-rmse:82100.58728	validation_1-rmse:114735.13342
[178]	validation_0-rmse:82057.41580	validation_1-rmse:114799.46339
[179]	validation_0-rmse:82003.52811	validation_1-rmse:114846.27698
[180]	validation_0-rmse:81972.67970	validation_1-rmse:114856.53870
[181]	validation_0-rmse:81937.53080	validation_1-rmse:114859.30750
[182]	validation_0-rmse:81864.21855	validation_1-rmse:114882.37673
[183]	validation_0-rmse:81784.84438	validation_1-rmse:114969.67309
[184]	validation_0-rmse:81726.83211	validation_1-rmse:114941.21577
[185]	validation_0-rmse:81643.23277	validation_1-rmse:115055.09565
[186]	validation_0-rmse:81601.26461	validation_1-rmse:115015.93607
[187]	validation_0-rmse:81575.08986	validation_1-rmse:115023.04170
[188]	validation_0-rmse:81535.66410	validation_1-rmse:115050.84750
[189]	validation_0-rmse:81484.53460	validation_1-rmse:115089.74095
[190]	validation_0-rmse:81442.58790	validation_1-rmse:115089.53211
[191]	validation_0-rmse:81392.07749	validation_1-rmse:115148.50479
[192]	validation_0-rmse:81359.43135	validation_1-rmse:115229.80162
[193]	validation_0-rmse:81314.49696	validation_1-rmse:115205.90437
[194]	validation_0-rmse:81254.75610	validation_1-rmse:115251.72148
[195]	validation_0-rmse:81208.20418	validation_1-rmse:115165.10040
[196]	validation_0-rmse:81173.72678	validation_1-rmse:115197.09892
[197]	validation_0-rmse:81089.45815	validation_1-rmse:115228.65188
[198]	validation_0-rmse:81027.87960	validation_1-rmse:115230.38007
[199]	validation_0-rmse:80979.03411	validation_1-rmse:115192.99090

Training completed!

Training Metrics:
  MAE:  $53,545
  RMSE: $80,979
  R2:   0.5309
  MAPE: 37.23%
  Median AE: $36,394

Validation Metrics:
  MAE:  $81,524
  RMSE: $115,193
  R2:   0.1173
  MAPE: 50.97%
  Median AE: $56,999

Evaluating on test set...

Evaluating on 535 test samples...

Test Metrics:
  MAE:  $83,299
  RMSE: $119,144
  R2:   0.0542
  MAPE: 52.97%
  Median AE: $57,645

Top 15 Most Important Features:
  company_tier_encoded: 0.1004
  skill_deep_learning: 0.0617
  is_entry: 0.0531
  is_director: 0.0502
  is_principal: 0.0442
  role_engineer: 0.0402
  role_analyst: 0.0393
  is_staff: 0.0385
  is_secondary_hub: 0.0375
  role_scientist: 0.0375
  role_researcher: 0.0348
  state_clean_encoded: 0.0332
  skill_cloud_ml: 0.0330
  estimated_yoe: 0.0324
  col_multiplier: 0.0317
Model saved to models/salary_model_20251129_024545.pkl

MLFlow run completed: e41a516567404156895f534a597ebdb0

Model training complete!
